const translation = {
  en: {
    navbar: {
      home: 'Home',
      feature: 'Feature',
      about: 'About Us',
      plans: 'Plans',
      testimonials: 'Testimonials',
      faq: 'FAQ',
      getstarted: 'Get started'
    },
    hero: {
      title: 'Welcome to Rutana',
      subtitle: '-Present by Qoritech-',
      description: 'Planing, delegating and report!\nOur platform helps your company with planing the best routes, simplify the rol assignment and get a full report of the whole situation.\nGet on the rode and make your company the fastest there is!',
      btnStart: 'Try free trial'
    },
    feaTure: {
      title: 'Meet our value',
      description: 'Take the control of your business',
      cards: {
        smartRoute: {
          title: 'Smart Route Management',
          text: 'Optimize routes in real time considering traffic, weather, and road conditions.'
        },
        tracking: {
          title: "Tracking",
          text: "Allow companies how their teams are performing during the day"
        },
        installC: {
          title: "Instant Communication",
          text: "Direct channel between drivers, managers, and clients to coordinate changes or solve issues."
        }
      }
    },
    aboutUS: {
      title: 'About Us',
      cards: {
        help: {
          title: 'How We Help',
          text: 'We empower transport companies and drivers with a smart, easy-to-use platform that simplifies logistics, ensures real-time visibility, and improves communication with clients. Our app reduces inefficiencies, saves time, and builds trust through transparent operation'
        },
        mission: {
          title: "Mission & Vision",
          text: "Our mission is to simplify and optimize transportation by providing drivers and companies with efficient, transparent, and reliable digital tools. With the vision of becoming the leading transportation ecosystem in Latin America, we aim to connect people, businesses, and products through innovative, technology-driven solutions."
        },
        value: {
          title: "Value Proposition",
          text: "Our value lies in delivering smarter logistics, real-time visibility, and cost savings, while strengthening trust and efficiency across the entire supply chain. We help transporters and companies streamline their operations, reduce complexity, and ensure seamless communication with clients."
        }
      }
    },
    team: {
      title: "Our Team",
      description: "Learn more about our partners",
      role: '- Software Engineer -',
      julio: "Jesús Castillo",
      gabriela: "Yaku Guzmán",
      jahaziel: "Christopher Costa",
      williams: "Ingrid Medina",
      yaku: "Santiago Gordillo"
    },
    pLans: {
      title: "Choose Your Plan",
      description: "Rutana has the right plan for you.",
      cards: {
        free: {
          title: "Free",
          text: "$0/month",
          features: [
            "Limit 10 users",
            "Basic route management",
            "Real-time tracking",
            "Email support"
          ],
          btnstarted: 'Get started'
        },
        professional: {
          title: "Professional Plan",
          text: "$50/month",
          features: [
            "50 users available",
            "All features from Free Plan",
            "Detailed reports",
            "Priority customer support"
          ],
          btnstarted: 'Get started'
        },
        enterprise: {
          title: "Enterprise Plan",
          text: "Contact us",
          features: [
            "Users according to your needs",
            "All features",
            "Dedicated account manager",
            "Premium support"
          ],
          btnstarted: 'Get started'
        }
      }
    },
    testimonials: {
      title: 'Testimonials',
      description: 'Hear what our users say about how Restock has transformed their business, helping them manage inventory smarter and reach their goals with greater peace of mind and confidence.',
      cards: {
        '1': {
          comment: '"As a driver, I can focus on th road instead of worrying about planning. Everything is mapped out for me."',
          name: 'David R., Driver'
        },
        '2': {
          comment: '"Simple. smart, and efficient. Exactly what our transport business needed."',
          name: 'Emily P., Manager'
        }
      }
    },
    faq: {
      title: 'Frequently ask Questions',
      subtitle: 'FAQ Forum',
      items: {
        '1': {
          question: 'What can I do?',
          answer: '....'
        },
        '2': {
          question: 'Select Occupation',
          answer: '...'
        },
        '3': {
          question: 'Select Occupation',
          answer: '...'
        }
      }
    },
    footer: {
      topLeftText: 'We make a better workspace around the world',
      sectionsTitle: 'Pages',
      sections: {
        home: 'Home',
        feature: 'Feature',
        about: 'About Us',
        plans: 'Plans',
        testimonials: 'Testimonials',
        faq: 'FAQ'
      },
      socialTitle: 'Social Networking',
      social: {
        facebook: '@Rutana',
        instagram: '@Rutana',
        twitter: '@Rutana',
        linkedin: '@Rutana'
      },
      bottom: {
        privacyPolicy: 'Privacy Policy',
        terms: 'Terms of Services',
        rights: '©2025 Qoritech LLC.'
      }
    }
  },

  es: {
    navbar: {
      home: 'Inicio',
      feature: 'Caracteristicas',
      about: 'Nosotros',
      plans: 'Planes',
      testimonials: 'Testimonios',
      faq: 'Preguntas',
      getstarted: 'Comenzar'
    },
    hero: {
      title: 'Bienvenido a Rutana',
      subtitle: '-Presentado por Qoritech-',
      description: '¡Planificación, delegación e informes!\nNuestra plataforma ayuda a tu empresa a planificar las mejores rutas, simplificar la asignación de roles y obtener un informe completo de toda la situación.\n¡Ponte en marcha y haz que tu empresa sea la más rápida!',
      btnStart: 'Prueba gratuita'
    },
    feaTure: {
      title: 'Conoce nuestro valor',
      description: 'Toma el control de tu negocio',
      cards: {
        smartRoute: {
          title: 'Gestión Inteligente de Rutas',
          text: 'Optimiza las rutas en tiempo real considerando el tráfico, el clima y las condiciones de las vías.'
        },
        tracking: {
          title: "Seguimiento",
          text: "Permite a las empresas ver cómo se desempeñan sus equipos durante el día."
        },
        installC: {
          title: "Comunicación Instantánea",
          text: "Canal directo entre conductores, gerentes y clientes para coordinar cambios o resolver problemas."
        }
      }
    },
    aboutUS: {
      title: 'Sobre Nosotros',
      cards: {
        help: {
          title: 'Cómo Ayudamos',
          text: 'Empoderamos a las empresas de transporte y a los conductores con una plataforma inteligente y fácil de usar que simplifica la logística, garantiza visibilidad en tiempo real y mejora la comunicación con los clientes. Nuestra app reduce ineficiencias, ahorra tiempo y genera confianza mediante una operación transparente.'
        },
        mission: {
          title: "Misión & Visión",
          text: "Nuestra misión es simplificar y optimizar el transporte proporcionando a conductores y empresas herramientas digitales eficientes, transparentes y confiables. Con la visión de convertirnos en el ecosistema de transporte líder en Latinoamérica, buscamos conectar personas, negocios y productos mediante soluciones innovadoras impulsadas por la tecnología."
        },
        value: {
          title: "Propuesta de Valor",
          text: "Nuestro valor radica en ofrecer logística más inteligente, visibilidad en tiempo real y ahorro de costos, al mismo tiempo que fortalecemos la confianza y la eficiencia en toda la cadena de suministro. Ayudamos a transportistas y empresas a agilizar sus operaciones, reducir la complejidad y asegurar una comunicación fluida con los clientes."
        }
      }
    },
    team: {
      title: "Nuestro Equipo",
      description: "Conoce más sobre nuestros colaboradores",
      role: '- Ingeniero de Software -',
      julio: "Jesús Castillo",
      gabriela: "Yaku Guzmán",
      jahaziel: "Christopher Costa",
      williams: "Ingrid Medina",
      yaku: "Santiago Gordillo"
    },
    pLans: {
      title: "Elige Tu Plan",
      description: "Rutana tiene el plan adecuado para ti.",
      cards: {
        free: {
          title: "Gratis",
          text: "$0/mes",
          features: [
            "Límite de 10 usuarios",
            "Gestión básica de rutas",
            "Seguimiento en tiempo real",
            "Soporte por correo electrónico"
          ],
          btnstarted: 'Empezar'
        },
        professional: {
          title: "Plan Profesional",
          text: "$50/mes",
          features: [
            "50 usuarios disponibles",
            "Todas las funciones del Plan Gratis",
            "Reportes detallados",
            "Soporte prioritario al cliente"
          ],
          btnstarted: 'Empezar'
        },
        enterprise: {
          title: "Plan Empresarial",
          text: "Contáctanos",
          features: [
            "Usuarios según tus necesidades",
            "Todas las funciones",
            "Gerente de cuenta dedicado",
            "Soporte premium"
          ],
          btnstarted: 'Empezar'
        }
      }
    },
    testimonials: {
      title: 'Testimonios',
      description: 'Escucha lo que nuestros usuarios dicen sobre cómo Restock ha transformado su negocio, ayudándolos a gestionar el inventario de manera más inteligente y alcanzar sus objetivos con mayor tranquilidad y confianza.',
      cards: {
        '1': {
          comment: '"Como conductor, puedo concentrarme en la carretera en lugar de preocuparme por la planificación. Todo está mapeado para mí."',
          name: 'David R., Conductor'
        },
        '2': {
          comment: '"Simple, inteligente y eficiente. Exactamente lo que nuestro negocio de transporte necesitaba."',
          name: 'Emily P., Gerente'
        }
      }
    },
    faq: {
      title: 'Preguntas Frecuentes',
      subtitle: 'Foro de Preguntas',
      items: {
        '1': {
          question: '¿Qué puedo hacer?',
          answer: '....'
        },
        '2': {
          question: 'Seleccionar ocupación',
          answer: '...'
        },
        '3': {
          question: 'Seleccionar ocupación',
          answer: '...'
        }
      }
    },
    footer: {
      topLeftText: 'Creamos mejores espacios de trabajo alrededor del mundo',
      sectionsTitle: 'Páginas',
      sections: {
        home: 'Inicio',
        feature: 'Funcionalidades',
        about: 'Sobre Nosotros',
        plans: 'Planes',
        testimonials: 'Testimonios',
        faq: 'Preguntas Frecuentes'
      },
      socialTitle: 'Redes Sociales',
      social: {
        facebook: '@Rutana',
        instagram: '@Rutana',
        twitter: '@Rutana',
        linkedin: '@Rutana'
      },
      bottom: {
        privacyPolicy: 'Política de Privacidad',
        terms: 'Términos de Servicio',
        rights: '©2025 Qoritech LLC.'
      }
    }
  }
};

// --- util: obtener traducción usando claves anidadas como "feature.cards.free.title"
function getNestedTranslation(obj, key) {
  if (!obj || !key) return undefined;
  return key.split('.').reduce((acc, k) => (acc !== undefined ? acc[k] : undefined), obj);
}


// --- convierte arrays y objetos en contenido legible en el DOM
function applyTranslationToElement(el, value) {
  if (value === undefined || value === null) return;
  // arrays -> si es UL/OL, renderizamos <li>, si no, los unimos por coma
  if (Array.isArray(value)) {
    if (el.tagName === 'UL' || el.tagName === 'OL') {
      el.innerHTML = value.map(item => `<li>${item}</li>`).join('');
    } else {
      el.textContent = value.join(', ');
    }
    return;
  }

  // objetos -> preferimos mostrar .title o .text si existen
  if (typeof value === 'object') {
    if (value.title) el.textContent = value.title;
    else if (value.text) el.textContent = value.text;
    else el.textContent = JSON.stringify(value);
    return;
  }

  // strings / numbers
  el.textContent = value;
}


// --- función principal de traducción
let currentLang = 'en';

function translatePage(lang) {
  const root = translation[lang];
  if (!root) { console.warn('Language not found:', lang); return; }

  document.querySelectorAll('[data-i18n]').forEach((el) => {
    const key = el.getAttribute('data-i18n'); // e.g. "plans.cards.free.features"
    const value = getNestedTranslation(root, key);
    if (value !== undefined) {
      // si es input con placeholder
      if ((el.tagName === 'INPUT' || el.tagName === 'TEXTAREA') && el.placeholder !== undefined) {
        el.placeholder = typeof value === 'string' ? value : String(value);
      } else {
        applyTranslationToElement(el, value);
      }
    }
  });

  document.documentElement.lang = lang;
  console.log('Language switched to', lang);
}


// --- evento del botón
document.addEventListener('DOMContentLoaded', () => {
  const langBtn = document.getElementById('langBtn');
  if (langBtn) {
    langBtn.addEventListener('click', () => {
      currentLang = currentLang === 'en' ? 'es' : 'en';
      translatePage(currentLang);
    });
  }

  // traducir al cargar
  translatePage(currentLang);
});